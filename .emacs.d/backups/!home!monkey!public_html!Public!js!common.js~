/*
+---------------------------------------------------------------
|Date:2012-01-15
+---------------------------------------------------------------
|Copyright (c) 2012 http://www.itlodge.net All rights reserved.
+---------------------------------------------------------------
|Author:Monkey
+---------------------------------------------------------------
*/

/*显示时间start*/
function showTime(){
    var today = new Date();
    var year = today.getFullYear();
    var month = today.getMonth() + 1;
    var day = today.getDate();
    var hour = today.getHours();
    var minute = today.getMinutes();
    var second = today.getSeconds();
    var week = today.getDay();

    week = change(week);
    minute = minute < 10 ? '0'+minute : minute;
    second = second < 10 ? '0'+second : second;

    document.getElementById('clock').innerHTML =
        year + "-" + month + "-" + day + " " +
        hour + ":" + minute + ":" + second + " " + week;
    setTimeout('showTime()',1000);
}

function change(w){
    switch(w){
        case 0:
            return "Sunday";
            break;
        case 1:
            return "Monday";
            break;
        case 2:
            return "Tuesday";
            break;
        case 3:
            return "Wednesday";
            break;
        case 4:
            return "Thursday";
            break;
        case 5:
            return "Friday";
            break;
        case 6:
            return "Saturday";
            break;
    }
}

/*显示时间end*/

/* 设为首页 */
function setHomePage(){
    if (document.all){
        document.body.style.behavior='url(#default#homepage)';
          document.body.setHomePage(window.location.href);
    }else if (window.sidebar){
        if(window.netscape){
            try{
                netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
            }catch (e){
                alert( "浏览器拒绝，如果想继续，请在地址栏内输入 about:config,然后将项 signed.applets.codebase_principal_support 值改为true" );
            }
        }
        var prefs = Components.classes['@mozilla.org/preferences-service;1'].getService(Components. interfaces.nsIPrefBranch);
        prefs.setCharPref('browser.startup.homepage',window.location.href);
    }else{
        alert('您的浏览器不支持自动设置首页, 请使用浏览器菜单手动设置!');
  }
}

/*加入收藏*/
function addFavorite(){
    if (document.all){
        try{
            window.external.addFavorite(window.location.href,document.title);
        }catch(e){
            alert( "加入收藏失败，请使用Ctrl+D进行添加" );
        }
    }else if (window.sidebar){
        window.sidebar.addPanel(document.title, window.location.href, "");
     }else{
        alert( "加入收藏失败，请使用Ctrl+D进行添加" );
    }
}

/*显示下拉菜单*/
function show_navi()
{
	 $(document).ready(function() {
		 $("div#navi li").hover(function() { //Hover over event on list item
		 $(this).find("div").show(200).css({ 'background' : '#ccc','display' : 'block',
			 'position':'absolute','z-index':'3'}); //Show the subnav
		 } , function() { //on hover out...
			 $(this).find("div").hide(200); //Hide the subnav
		 });
	 
	 });	
}

/*返回顶部 */
function back_top()
{
	$(document).ready(function () {
		var bnt = $('#go_to_top');
		
		$(window).scroll(function(){
			if(document.all){
				var top = $(window).scrollTop() + 550;
				bnt.css({"position":"absolute","bottom":"auto","top":top});
			}
			if($(window).scrollTop() > 30){
				bnt.show(200);
			}else{
				bnt.hide(200);
			}
		});
	});
}

/*图片播放器*/
function load_player(id)
{
	var player = $("#"+id).playImgs({
	  imgCSS : {'width' : '260px', 'height' : '200px'},
	  width	: '260px',
	  height: '230px',
	  time	: '3000',
	  transition : 1,
	  duration : 100
  	}).start();
}



/*载入写博客editor*/

function load_full_editor(id)
{
	var plugins={
			Code:{c:'btnCode',t:'插入代码',h:1,e:function(){
				var _this=this;
				var htmlCode='<div><select id="xheCodeType"><option value="html">HTML/XML</option>'
					+ '<option value="js">Javascript</option><option value="css">CSS</option>'
					+ '<option value="php">PHP</option><option value="java">Java</option>'
					+ '<option value="py">Python</option><option value="pl">Perl</option>'
					+ '<option value="rb">Ruby</option><option value="cs">C#</option>'
					+ '<option value="cpp">C++/C</option><option value="vb">VB/ASP</option>'
					+ '<option value="">其它</option></select></div><div>'
					+ '<textarea id="xheCodeValue" wrap="soft" spellcheck="false" style="width:300px;height:100px;" />'
					+ '</div><div style="text-align:right;"><input type="button" id="xheSave" value="确定" /></div>';			
				var jCode=$(htmlCode),jType=$('#xheCodeType',jCode),jValue=$('#xheCodeValue',jCode),jSave=$('#xheSave',jCode);
				jSave.click(function(){
					_this.loadBookmark();
					_this.pasteHTML('<pre class="prettyprint lang-'+jType.val()+'"><br />'+
							_this.domEncode(jValue.val())+'<br /></pre>');
					_this.hidePanel();
				});
				_this.saveBookmark();
				_this.showDialog(jCode);
			}}
		};
	$('#'+id).xheditor(
		{plugins:plugins,
		tools:'Paste,Pastetext,Blocktag,Fontface,FontSize,Bold,Italic,FontColor,BackColor,SelectAll'+
				'Align,List,Link,Unlink,Img,Hr,Emot,Table,Code,Source,Fullscreen',
		remoteImgSaveUrl:'demos/saveremoteimg.php',
		loadCSS:'<style>body{font-size:18px;font-family:Courier New;}</style>'}
	);
}

/*news*/
function show_news_navi(id)
{
	if(document.all){
		$(".it-news-navi").css({"border": "none"});
		//$(".it-news-navi").find('li').get(0).css({"float": "right"});
	}
	(function($){
	    $.fn.dynamicNav = function(){
	    	this.each(function(){
	     		var navList=$(this).find("li"),
	      		navLink=navList.find("a");
			    navList.wrapInner("<span></span>");
		        var span=navLink.parent();
	       		navLink.each(function(){
					var w=$(this).outerWidth(),
					p=$(this).parent();
					$(this).clone().appendTo(p).addClass("over");
					p.css("width",w);
				});
				span.each(function(){
					$(this).css({"margin-top" : -$(this).outerHeight()/2});
					$(this).find('a').last().removeClass("over").prev().addClass("over");
				});
				 //鼠标经过时动画函数
		      function over(o){
		         o.animate({"margin-top": -o.outerHeight()/2},100);
		      }

		      //鼠标移开时动画函数
		      function out(o){
		       o.animate({"margin-top":0},100);
		      }

		      //鼠标经过和离开
		      span.hover(function(){out($(this));},
		      	function(){over($(this));});
	       });
	   };
	 })(jQuery);
	$(function(){
		$("#"+id).dynamicNav();
	});
}
